<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>E-Commerce Frontend</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles/main.css">
</head>

<body>
<script>
  if (!localStorage.getItem("loggedIn")) {
    window.location.href = "auth.html";
  }
</script>

<header class="header">
    <div class="logo">
        <h2>MyStore</h2>
    </div>

    <nav class="nav" id="navMenu">
        <a href="index.html">Home</a>
        <a href="#products">Products</a>
        <a href="#">About</a>
        <a href="#">Contact</a>
        <a href="auth.html">Login</a>
    </nav>

    <div class="search">
        <input type="text" placeholder="Search products...">
    </div>

    <a href="cart.html" class="cart">
        ðŸ›’ <span class="count">0</span>
    </a>

    <div class="hamburger" id="hamburger">â˜°</div>
</header>

<section class="hero">
    <div class="hero-content">
        <h1>Biggest Sale of the Year!</h1>
        <p>Discover amazing products at unbeatable prices.</p>
        <a href="#products" class="hero-btn">Shop Now</a>
    </div>
</section>

<section class="products" id="products">
    <h2 class="section-title">Our Products</h2>
    <p id="loading">Loading products...</p>
    <p id="error" style="display:none; color:red;">
        Products load nahi ho paaye. Please try again.
    </p>
    <div class="product-grid" id="productGrid"></div>
</section>

<div id="toast" class="toast">Item added to cart ðŸ›’</div>

<script src="scripts/app.js"></script>

<script>
    const hamburger = document.getElementById("hamburger");
    const navMenu = document.getElementById("navMenu");

    hamburger.addEventListener("click", () => {
        navMenu.classList.toggle("active");
        document.body.classList.toggle("menu-open");
    });
</script>
<script type="module">
import { onAuthStateChanged, signOut } from 
"https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";

import { getAuth } from 
"https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";

const auth = getAuth();

const nav = document.querySelector(".nav");

onAuthStateChanged(auth, (user) => {
    if (user) {
        nav.innerHTML += `<a href="#" id="logout">Logout</a>`;
        document.getElementById("logout").onclick = () => {
            signOut(auth);
            location.reload();
        };
    }
});
</script>

</body>
</html>
